From 09bd202e25d08fde5481d9797263b0d7085042bd Mon Sep 17 00:00:00 2001
From: q66 <q66@chimera-linux.org>
Date: Tue, 16 Dec 2025 00:07:14 +0100
Subject: [PATCH] Selectively downgrade some crates in cargo

Until we can figure out why it's busted on ppc64le, downgrade
some dependencies until things no longer crash. This is not
sustainable forever but for now it makes it work.
---
 Cargo.lock | 13 +++++++------
 Cargo.toml |  6 +++---
 2 files changed, 10 insertions(+), 9 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index ca2a8a0..8f668f6 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -123,9 +123,9 @@ dependencies = [
 
 [[package]]
 name = "anyhow"
-version = "1.0.100"
+version = "1.0.75"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "a23eb6b1614318a8071c9b2521f36b424b2c83db5eb3a0fead4a6c0809af6e61"
+checksum = "a4668cab20f66d8d020e1fbc0ebe47217433c1b6c8f2040faf858554e394ace6"
 
 [[package]]
 name = "arc-swap"
@@ -2571,16 +2571,17 @@ dependencies = [
 
 [[package]]
 name = "ignore"
-version = "0.4.23"
+version = "0.4.20"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "6d89fd380afde86567dfba715db065673989d6253f42b88179abd3eae47bda4b"
+checksum = "dbe7873dab538a9a44ad79ede1faf5f30d49f9a5c883ddbab48bce81b64b7492"
 dependencies = [
- "crossbeam-deque",
  "globset",
+ "lazy_static",
  "log",
  "memchr",
- "regex-automata",
+ "regex",
  "same-file",
+ "thread_local",
  "walkdir",
  "winapi-util",
 ]
diff --git a/Cargo.toml b/Cargo.toml
index 5f1830d..f0de967 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -21,7 +21,7 @@ repository = "https://github.com/rust-lang/cargo"
 annotate-snippets = { version = "0.12.4", features = ["simd"] }
 anstream = "0.6.20"
 anstyle = "1.0.13"
-anyhow = "1.0.100"
+anyhow = "1.0.75"
 base64 = "0.22.1"
 blake3 = "1.8.2"
 build-rs = { version = "0.3.1", path = "crates/build-rs" }
@@ -57,7 +57,7 @@ hex = "0.4.3"
 hmac = "0.12.1"
 home = "0.5.11"
 http-auth = { version = "0.1.10", default-features = false }
-ignore = "0.4.23"
+ignore = "0.4.20"
 im-rc = "15.1.0"
 indexmap = "2.11.4"
 itertools = "0.14.0"
@@ -67,7 +67,7 @@ lazycell = "1.3.0"
 libc = "0.2.174" # Please ensure in lockfile it stays as 0.2.174 until bytecodealliance/rustix#1496 resolved
 libgit2-sys = "0.18.2"
 libloading = "0.8.9"
-memchr = "2.7.6"
+memchr = "2.6.0"
 miow = "0.6.1"
 opener = "0.8.3"
 openssl = "0.10.73"
-- 
2.52.0

