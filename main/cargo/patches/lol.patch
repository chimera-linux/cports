From 8c2504e4bbd055d58a46495be29ac0b587760243 Mon Sep 17 00:00:00 2001
From: q66 <q66@chimera-linux.org>
Date: Sat, 1 Nov 2025 15:48:51 +0100
Subject: [PATCH] Selectively downgrade some crates in cargo

Until we can figure out why it's busted on ppc64le, downgrade
some dependencies until things no longer crash. This is not
sustainable forever but for now it makes it work.
---
 Cargo.lock | 17 +++++++++--------
 Cargo.toml |  6 +++---
 2 files changed, 12 insertions(+), 11 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index 1d1c249..ba40d77 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -123,9 +123,9 @@ dependencies = [
 
 [[package]]
 name = "anyhow"
-version = "1.0.99"
+version = "1.0.75"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "b0674a1ddeecb70197781e945de4b3b8ffb61fa939a5597bcf48503737663100"
+checksum = "a4668cab20f66d8d020e1fbc0ebe47217433c1b6c8f2040faf858554e394ace6"
 
 [[package]]
 name = "arc-swap"
@@ -2580,16 +2580,17 @@ dependencies = [
 
 [[package]]
 name = "ignore"
-version = "0.4.23"
+version = "0.4.20"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "6d89fd380afde86567dfba715db065673989d6253f42b88179abd3eae47bda4b"
+checksum = "dbe7873dab538a9a44ad79ede1faf5f30d49f9a5c883ddbab48bce81b64b7492"
 dependencies = [
- "crossbeam-deque",
  "globset",
+ "lazy_static",
  "log",
  "memchr",
- "regex-automata",
+ "regex",
  "same-file",
+ "thread_local",
  "walkdir",
  "winapi-util",
 ]
@@ -2947,9 +2948,9 @@ dependencies = [
 
 [[package]]
 name = "memchr"
-version = "2.7.5"
+version = "2.7.6"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "32a282da65faaf38286cf3be983213fcf1d2e2a58700e808f83f4ea9a4804bc0"
+checksum = "f52b00d39961fc5b2736ea853c9cc86238e165017a493d1d5c8eac6bdc4cc273"
 
 [[package]]
 name = "memmap2"
diff --git a/Cargo.toml b/Cargo.toml
index c2e4976..a634c92 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -21,7 +21,7 @@ repository = "https://github.com/rust-lang/cargo"
 annotate-snippets = { version = "0.12.3", features = ["simd"] }
 anstream = "0.6.20"
 anstyle = "1.0.11"
-anyhow = "1.0.98"
+anyhow = "1.0.75"
 base64 = "0.22.1"
 blake3 = "1.8.2"
 build-rs = { version = "0.3.1", path = "crates/build-rs" }
@@ -57,7 +57,7 @@ hex = "0.4.3"
 hmac = "0.12.1"
 home = "0.5.11"
 http-auth = { version = "0.1.10", default-features = false }
-ignore = "0.4.23"
+ignore = "0.4.20"
 im-rc = "15.1.0"
 indexmap = "2.10.0"
 itertools = "0.14.0"
@@ -67,7 +67,7 @@ lazycell = "1.3.0"
 libc = "0.2.174" # Please ensure in lockfile it stays as 0.2.174 until bytecodealliance/rustix#1496 resolved
 libgit2-sys = "0.18.2"
 libloading = "0.8.8"
-memchr = "2.7.5"
+memchr = "2.6.0"
 miow = "0.6.0"
 opener = "0.8.2"
 openssl = "0.10.73"
-- 
2.51.2

