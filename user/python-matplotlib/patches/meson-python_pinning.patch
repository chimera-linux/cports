From 03fa1ffb1b26733f109ae10ac67c8432f48ec320 Mon Sep 17 00:00:00 2001
From: Elliott Sales de Andrade <quantum.analyst@gmail.com>
Date: Sat, 10 May 2025 05:03:10 -0400
Subject: [PATCH] Remove meson-python pinning (#30035)

Version 0.18 should restore handling of symlinks:
https://github.com/mesonbuild/meson-python/pull/728
---
 pyproject.toml | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/pyproject.toml b/pyproject.toml
index 81a1c32baf34..70b078a73d27 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -46,7 +46,7 @@ requires-python = ">=3.11"
 [project.optional-dependencies]
 # Should be a copy of the build dependencies below.
 dev = [
-    "meson-python>=0.13.1,<0.17.0",
+    "meson-python>=0.13.1,!=0.17.*",
     "pybind11>=2.13.2,!=2.13.3",
     "setuptools_scm>=7",
     # Not required by us but setuptools_scm without a version, cso _if_
@@ -70,7 +70,9 @@ dev = [
 build-backend = "mesonpy"
 # Also keep in sync with optional dependencies above.
 requires = [
-    "meson-python>=0.13.1,<0.17.0",
+    # meson-python 0.17.x breaks symlinks in sdists. You can remove this pin if
+    # you really need it and aren't using an sdist.
+    "meson-python>=0.13.1,!=0.17.*",
     "pybind11>=2.13.2,!=2.13.3",
     "setuptools_scm>=7",
 ]
