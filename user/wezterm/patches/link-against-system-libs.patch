diff --git a/deps/cairo/build.rs b/deps/cairo/build.rs
index c070f351d..a214ea989 100644
--- a/deps/cairo/build.rs
+++ b/deps/cairo/build.rs
@@ -210,6 +210,6 @@ fn cairo() {
 }
 
 fn main() {
-    pixman();
-    cairo();
+    println!("cargo:rustc-link-lib=pixman-1");
+    println!("cargo:rustc-link-lib=cairo")
 }
diff --git a/deps/freetype/build.rs b/deps/freetype/build.rs
index b4a8407b8..c3b16d422 100644
--- a/deps/freetype/build.rs
+++ b/deps/freetype/build.rs
@@ -235,9 +235,9 @@ fn git_submodule_update() {
 }
 
 fn main() {
-    zlib();
-    libpng();
-    freetype();
+    println!("cargo:rustc-link-lib=z");
+    println!("cargo:rustc-link-lib=png");
+    println!("cargo:rustc-link-lib=freetype");
     let out_dir = env::var("OUT_DIR").unwrap();
     println!("cargo:outdir={}", out_dir);
     println!("cargo:rustc-env=MACOSX_DEPLOYMENT_TARGET=10.9");
diff --git a/deps/harfbuzz/build.rs b/deps/harfbuzz/build.rs
index 98c372e71..37cd13001 100644
--- a/deps/harfbuzz/build.rs
+++ b/deps/harfbuzz/build.rs
@@ -65,7 +65,7 @@ fn git_submodule_update() {
 }
 
 fn main() {
-    harfbuzz();
+    println!("cargo:rustc-link-lib=harfbuzz");
     let out_dir = env::var("OUT_DIR").unwrap();
     println!("cargo:outdir={}", out_dir);
     println!("cargo:rustc-env=MACOSX_DEPLOYMENT_TARGET=10.9");
diff --git a/wezterm-ssh/Cargo.toml b/wezterm-ssh/Cargo.toml
index bea299af9..1c5f57ef5 100644
--- a/wezterm-ssh/Cargo.toml
+++ b/wezterm-ssh/Cargo.toml
@@ -30,7 +30,7 @@ log = "0.4"
 portable-pty = { version="0.8", path = "../pty" }
 regex = "1"
 smol = "2.0"
-ssh2 = {version="0.9.3", features=["openssl-on-win32"], optional = true}
+ssh2 = {version="0.9.4", features=["openssl-on-win32"], optional = true}
 libssh-rs = {version="0.3.2", features=["vendored"], optional = true}
 #libssh-rs = {path="../../libssh-rs/libssh-rs", features=["vendored"], optional = true}
 thiserror = "1.0"
diff --git a/wezterm-version/Cargo.toml b/wezterm-version/Cargo.toml
index 83d686a7a..3ade88db6 100644
--- a/wezterm-version/Cargo.toml
+++ b/wezterm-version/Cargo.toml
@@ -8,6 +8,6 @@ publish = false
 # See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html
 
 [build-dependencies]
-git2 = { version = "0.18", default-features = false }
+git2 = { version = "0.19", default-features = false }
 
 [dependencies]
diff --git a/window/Cargo.toml b/window/Cargo.toml
index 3cfa26dc9..96e3dd0d1 100644
--- a/window/Cargo.toml
+++ b/window/Cargo.toml
@@ -77,7 +77,7 @@ xcb = {version="1.3", features=["render", "randr", "dri2", "xkb", "xlib_xcb", "p
 xkbcommon = { version = "0.7.0", features = ["x11", "wayland"] }
 mio = {version="0.8", features=["os-ext"]}
 libc = "0.2"
-xcb-imdkit = { version="0.3", git="https://github.com/wez/xcb-imdkit-rs.git", rev="358e226573461fe540efb920e2aad740e3c6fab1"}
+xcb-imdkit = { version="0.3", git="https://github.com/wez/xcb-imdkit-rs.git", rev="358e226573461fe540efb920e2aad740e3c6fab1", features = ["use-system-lib"]}
 zbus = "4.2"
 zvariant = "4.0"
 
